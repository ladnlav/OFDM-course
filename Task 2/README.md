# Отчет к домашнему заданию №2: Рандомизатор и расчёт PAPR

## Квинтэссенция работы
Эта работа представляет собой небольшую модернизацию базовой модели OFDM-передатчика и приёмника. Был добавлен рандомизатор (скрэмблер) и соответственно дерандомизатор (дескрэмблер) в целях уменьшения PAPR. Также добавлены функции расчёта PAPR по OFDM-символам, а также функции построения CCDF. 
![Alt-text](<graphs/task2.png>)


## Что такое PAPR?
__PAPR (peak-to-average power ratio)__ - пик фактор или отношение пиков мощности OFDM-сигнала к среднему значению мощности. Оценка PAPR полезна тем, что позволяет численно характеризовать явление, когда внутри одного OFDM-символа наблюдаются резкие всплески сигнала по амплитуде из-за того, что передаются сразу несколько частот (синусоид), которые при наложении друг на друга могут дать резкое усиление в амплитуде. И нам важно следить за высоким PAPR, ибо так или иначе наш сигнал будет проходить через усилитель, который имеет свою характеристику усиления (см. график ниже). И тут возможно два варианта:
* либо мы к средней мощности сигнала прибавляем мощность пиков, из-за чего пики усиливаются сильно, а другие отсчёты сигнала слабо;
* либо передвинем точку B к средней мощности, чтоб основные отсчёты сигнала усиливались в окрестности точки B - это приведёт к тому, что некоторые точки с изначально высокой мощностью будут выбиваться в нелинейную область C, почему будет происходить обрезание по мощности (клиппирование) и потеря информации. 
Поэтому важно, чтоб PAPR не превышал определённого уровня.

![Alt-text](<graphs/amp.png>)

## Что такое CCDF(PAPR)?
__CCDF (PAPR)__ - это комплементарные интегральные функции распределения (CCDF -complementary-cumulative-distribution-
function) пик-фактора. Эта функция говорит нам о вероятности того, что пик-фактор OFDM-символа превышает данный уровень PAPR. 

CCDF лучше простого PAPR тем, что даёт нам некоторое представление о том, в каком количестве большие пики присутствуют в сигнале и можно ли их игнорировать. Но в то же время недостаток этого способа оценки пик-фактора заключается в необходимости проведения расчета PAPR с помощью скользящего окна по всему OFDM-сигналу, что усложняет вычисления.
![Alt-text](<graphs/ССDF.png>)

## PAPR сигнала с рандомизацией vs PAPR обычного сигнала

* PAPR обычного и рандомизированного сигналов
![Alt-text](<graphs/PAPR1.png>)

Как видно из работы кода, при рандомизации значение PAPR `23 dB`, а без неё `10 dB` - PAPR с рандомизацией лучше. На мой взгляд, отличие связано с тем, что поскольку передаётся картинка, то мы имеем коррелированный поток бит, из-за чего при OFDM-модуляции некоторые синусоиды складываются и дают ощутимые пики во временной области, а когда мы рандомизируем наш битовый поток, мы убираем коррелированность в данных, поэтому пики перестают иметь такие большие значения, как имели до.

## CCDF(PAPR) сигнала с рандомизацией vs CCDF(PAPR) обычного сигнала
* CCDF(PAPR) для обычного и рандомизированного сигналов
![Alt-text](<graphs/ССDF2.png>)

**Отличия**. Во-первых, CCDF рандомизированного сигнала находится слева относительно CCDF обычного сигнала - значения PAPR  с рандомизатором в целом ниже. Во-вторых, наблюдается более резкий спад CCDF в рандомизированном случае - это говорит о том, что различных значений PAPR в рандомизированном OFDM-сигнале в целом меньше, если сравнивать с обычным OFDM-сигналом.

**Лучший сценарий.** Очевидно, лучшим сценарием является использование рандомизированного OFDM-сигнала, потому что PAPR в целом меньше и мощность пиков ближе к средней мощности сигнала.

**Причина различий в PAPR.** Как уже отмечалось выше, рандомизация убирает коррелированность передаваемого потока бит, что в свою очередь уменьшает возможные пики из-за наложения синусоид.